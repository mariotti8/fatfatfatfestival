/**
 * demo.js
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2019, Codrops
 * http://www.codrops.com
 */
let isHover=!1;const x=window.matchMedia("(min-width: 991px)"),max479=window.matchMedia("(max-width: 479px)"),max991=window.matchMedia("(max-width: 991px)");{const e={lineEq:(e,t,i,s,n)=>{var l=(e-t)/(i-s);return l*n+(t-l*s)},lerp:(e,t,i)=>(1-i)*e+i*t,distance:(e,t,i,s)=>{var n=e-t,l=i-s;return Math.hypot(n,l)},randomNumber:(e,t)=>Math.floor(Math.random()*(t-e+1)+e)};let t;const i=()=>t={width:window.innerWidth,height:window.innerHeight};i(),window.addEventListener("resize",i);const s=e=>{let t=0,i=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,i=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+body.scrollLeft+docEl.scrollLeft,i=e.clientY+body.scrollTop+docEl.scrollTop),{x:t,y:i}};let n={x:t.width/2,y:t.height/2};window.addEventListener("mousemove",e=>n=s(e));class l{constructor(e,t){this.DOM={el:e},this.DOM.title=t,this.DOM.titleLetters=[...this.DOM.title.querySelectorAll("span")],this.DOM.titleLetters.sort(()=>Math.round(Math.random())-.5),this.DOM.number=this.DOM.el.querySelector(".number"),this.DOM.subtitle=this.DOM.el.querySelector(".caption"),this.DOM.imgWrap=this.DOM.el.querySelector(".img-wrap"),this.DOM.img=this.DOM.imgWrap.querySelector(".img"),this.DOM.img.classList.contains("more-artists")||(this.DOM.imageSliderFace=this.DOM.img.querySelector(".image-slider-face"),this.DOM.imageContainer=this.DOM.imageSliderFace.querySelector(".image-container"))}move(e,t,i){return new Promise((s,n)=>{const l="left"===e?"+="+-1*t:"+="+t,a="left"===e?"+="+-1*i:"+="+i;new TimelineMax({onComplete:s}).to(this.DOM.imgWrap,1.2,{x:l,ease:Quart.easeInOut},0).to(this.DOM.number,1.14,{x:l,ease:Quint.easeInOut},0).to(this.DOM.subtitle,1.32,{x:l,ease:Quart.easeInOut},0).to(this.DOM.title,1.26,{x:a,ease:Quart.easeInOut},0)})}setCenter(){this.isCenter=!0,this.DOM.el.classList.add("grid__item--center"),this.DOM.title.classList.add("grid__item--center"),TweenMax.set([this.DOM.el,this.DOM.title],{opacity:1})}setRight(){this.isRight=this.isCenter=!1,this.isLeft=!0,this.DOM.el.classList.add("grid__item--right"),this.DOM.title.classList.add("grid__item--right"),TweenMax.set([this.DOM.el,this.DOM.title],{opacity:1})}setLeft(){this.isLeft=this.isCenter=!1,this.isRight=!0,this.DOM.el.classList.add("grid__item--left"),this.DOM.title.classList.add("grid__item--left"),TweenMax.set([this.DOM.el,this.DOM.title],{opacity:1})}reset(){TweenMax.set([this.DOM.el,this.DOM.imgWrap,this.DOM.number,this.DOM.subtitle,this.DOM.title],{transform:"none"}),TweenMax.set([this.DOM.el,this.DOM.title],{opacity:0}),this.DOM.title.classList="grid__item grid__item--title",this.DOM.el.classList="grid__item grid__item--slide"}animateElementsOut(t){return new Promise((i,s)=>{const n=e.randomNumber(0,100)/500;if(this.elemsTimeline=new TimelineMax({onComplete:i}).staggerTo(this.DOM.titleLetters,1,{y:e.randomNumber(300,600),opacity:0,ease:Quart.easeInOut},.04,n).staggerTo(this.DOM.titleLetters,.5,{scaleY:2.2,ease:Quart.easeIn},.04,n).staggerTo(this.DOM.titleLetters,.5,{scaleY:1,ease:Quart.easeOut},.04,n+.5).to(this.DOM.number,1,{y:-500,opacity:0,ease:Quart.easeInOut},n+.3).to(this.DOM.imgWrap,.8,{y:-500,opacity:0,ease:Quart.easeInOut},n+.4).to(this.DOM.imgWrap,.4,{scaleX:.95,scaleY:1.4,ease:Quart.easeIn},n+.4).to(this.DOM.imgWrap,.4,{scaleX:1,scaleY:1,ease:Quart.easeOut},n+.4+.4).to(this.DOM.subtitle,1,{y:-500,opacity:0,ease:Quart.easeInOut},n+.5),this.isCenter){const e=t.querySelector(".content__item-header-title"),i=t.querySelector(".img--content");this.elemsTimeline.to(e,.8,{ease:Expo.easeOut,startAt:{y:"100%",opacity:0,rotation:-16},y:"0%",rotation:0,opacity:1},n+1.3).set(i,{scale:1.2},0).to(i,.8,{ease:Expo.easeOut,scale:1},n+1.3).to(o.DOM.el,1,{ease:Quint.easeOut,y:"-100%"},n+1.2)}})}animateElementsIn(t){return new Promise((i,s)=>{const n=e.randomNumber(0,50)/500;if(this.elemsTimeline=new TimelineMax({onComplete:i}),this.isCenter){const e=t.querySelector(".content__item-header-title"),i=t.querySelector(".img--content");this.elemsTimeline.to(e,1,{ease:Quint.easeOut,y:"50%",opacity:0},0).to(i,1,{ease:Quint.easeOut,scale:1.2},0).to(o.DOM.el,1,{ease:Quint.easeOut,y:"0%"},0)}this.elemsTimeline.to(this.DOM.subtitle,.8,{y:0,opacity:1,ease:Quart.easeOut},n).to(this.DOM.imgWrap,.8,{y:0,opacity:1,scaleX:1,scaleY:1,ease:Quart.easeOut},n+.1).to(this.DOM.number,.8,{y:0,opacity:1,ease:Quart.easeOut},n+.2).staggerTo(this.DOM.titleLetters,.8,{y:0,opacity:1,scaleX:1,scaleY:1,ease:Quart.easeOut},.03,n+.1)})}}class a{constructor(i){if(this.DOM={el:i},this.DOM.titlesWrap=this.DOM.el.querySelector(".titles-wrap"),this.DOM.titlesInner=this.DOM.titlesWrap.querySelector(".grid--titles"),this.DOM.titles=[...this.DOM.titlesInner.querySelectorAll(".grid__item--title")],this.slides=[],[...this.DOM.el.querySelectorAll(".grid__item--slide")].forEach((e,t)=>this.slides.push(new l(e,this.DOM.titles[t]))),this.slidesTotal=this.slides.length,this.slidesTotal<4)return;this.center=0,this.DOM.contentItems=[...document.querySelectorAll(".content__item")],this.DOM.interaction={left:document.querySelector(".grid__item--left"),center:document.querySelector(".grid__item--center"),right:document.querySelector(".grid__item--right")},this.DOM.mobileInteraction={left:document.querySelector(".arrow-left"),right:document.querySelector(".arrow-right")},this.setVisibleSlides(),this.calculateGap(),this.initEvents();let s={translation:0,rotation:-8};const a=()=>{s.translation=e.lerp(s.translation,e.lineEq(-15,15,t.width,0,n.x),.03);for(let e=0;e<=this.slidesTotal-1;++e)TweenMax.set(this.slides[e].DOM.img,{x:s.translation}),TweenMax.set(this.DOM.titlesWrap,{x:-1*s.translation});requestAnimationFrame(a)};requestAnimationFrame(a)}setVisibleSlides(){this.centerSlide=this.slides[this.center],this.rightSlide=this.slides[this.center+1<=this.slidesTotal-1?this.center+1:0],this.leftSlide=this.slides[this.center-1>=0?this.center-1:this.slidesTotal-1],this.centerSlide.setCenter(),this.rightSlide.setRight(),this.leftSlide.setLeft()}calculateGap(){const t=this.slides[0].DOM.el.getBoundingClientRect(),i=this.slides[1].DOM.el.getBoundingClientRect();this.gap=e.distance(t.left+t.width/2,i.left+i.width/2,t.top+t.height/2,i.top+i.height/2);const s=[...document.querySelectorAll(".grid__item--title")][1].getBoundingClientRect(),n=[...document.querySelectorAll(".grid__item--title")][2].getBoundingClientRect();this.titleGap=e.distance(s.left+s.width/2,n.left+n.width/2,s.top+s.height/2,n.top+n.height/2)}initEvents(){this.clickRightFn=(()=>this.navigate("right")),this.DOM.interaction.right.addEventListener("click",this.clickRightFn),this.DOM.mobileInteraction.right.addEventListener("click",this.clickRightFn),this.clickLeftFn=(()=>this.navigate("left")),this.DOM.interaction.left.addEventListener("click",this.clickLeftFn),this.DOM.mobileInteraction.left.addEventListener("click",this.clickLeftFn),this.clickCenterFn=(()=>this.openSlide()),this.DOM.interaction.center.addEventListener("click",this.clickCenterFn),this.mouseenterCenterFn=(()=>{!this.isAnimating&&x.matches&&((new TimelineMax).to(this.centerSlide.DOM.imgWrap,.7,{ease:Expo.easeOut,scale:1.02}).to(this.centerSlide.DOM.img,1.7,{ease:Expo.easeOut,scale:1.05},0),(new TimelineMax).to(this.centerSlide.DOM.number,.2,{ease:Expo.easeOut,yPercent:-50}),(new TimelineMax).to(this.centerSlide.DOM.subtitle,.2,{ease:Expo.easeOut,yPercent:50}),isHover=!0)}),this.DOM.interaction.center.addEventListener("mouseenter",this.mouseenterCenterFn),this.mouseleaveCenterFn=(()=>{!this.isAnimating&&x.matches&&((new TimelineMax).to(this.centerSlide.DOM.imgWrap,.7,{ease:Expo.easeOut,scale:1}).to(this.centerSlide.DOM.img,.7,{ease:Expo.easeOut,scale:1},0),(new TimelineMax).to(this.centerSlide.DOM.number,1.7,{ease:Expo.easeOut,yPercent:0}),(new TimelineMax).to(this.centerSlide.DOM.subtitle,.8,{ease:Expo.easeOut,yPercent:0}),isHover=!1)}),this.DOM.interaction.center.addEventListener("mouseleave",this.mouseleaveCenterFn),this.resizeFn=(()=>this.calculateGap()),window.addEventListener("resize",this.resizeFn),max991.matches&&document.querySelectorAll(".mobile-close").forEach(e=>e.addEventListener("click",()=>this.closeSlide())),this.DOM.contentItems.forEach(e=>{e.querySelector(".img-wrap--content").addEventListener("click",()=>this.closeSlide())})}navigate(e){if(this.isAnimating)return!1;this.isAnimating=!0;const t="right"===e?this.center<this.slidesTotal-2?this.center+2:Math.abs(this.slidesTotal-2-this.center):this.center>=2?this.center-2:Math.abs(this.slidesTotal-2+this.center);this.center="right"===e?this.center<this.slidesTotal-1?this.center+1:0:this.center>0?this.center-1:this.slidesTotal-1,this.upcomingSlide=this.slides[t],this.upcomingTitle=this.upcomingSlide.DOM.title,TweenMax.set(this.upcomingSlide.DOM.el,{x:"right"===e?2*this.gap:-1*this.gap*2,opacity:1}),TweenMax.set(this.upcomingTitle,{x:"right"===e?2*this.titleGap:-1*this.titleGap*2,opacity:1});const i=[this.upcomingSlide,this.centerSlide,this.rightSlide,this.leftSlide];let s=[];i.forEach(t=>s.push(t.move("right"===e?"left":"right",this.gap,this.titleGap))),Promise.all(s).then(()=>{i.forEach(e=>e.reset()),this.setVisibleSlides(),this.isAnimating=!1})}openSlide(){this.toggleSlide("open")}closeSlide(){this.toggleSlide("close")}toggleSlide(e){if(this.isAnimating)return;this.isAnimating=!0;const t=this.DOM.contentItems[this.center];if(t.classList.contains("last__article"))return void(window.location.href="/artists");this.DOM.el.classList["open"===e?"add":"remove"]("content-open");const i=[this.centerSlide,this.rightSlide,this.leftSlide];let s=[];i.forEach(i=>s.push(i["open"===e?"animateElementsOut":"animateElementsIn"](t))),"open"===e?(max479.matches&&(document.getElementsByTagName("main")[0].style.overflowY="scroll"),max991.matches&&(this.DOM.mobileInteraction.left.style.display="none",this.DOM.mobileInteraction.right.style.display="none"),t.classList.add("content__item--current")):(document.getElementsByTagName("main")[0].scrollTo(0,0),document.getElementsByTagName("main")[0].style.overflowY="hidden",max991.matches&&(this.DOM.mobileInteraction.left.style.display="block",this.DOM.mobileInteraction.right.style.display="block")),Promise.all(s).then(()=>{"close"===e&&t.classList.remove("content__item--current"),this.isAnimating=!1})}}class r{constructor(e){this.DOM={el:e},this.DOM.el.style.width=`calc(100vw * ${Math.cos(8*Math.PI/180)} + 100vh * ${Math.sin(8*Math.PI/180)})`,this.DOM.el.style.height=`calc(100vw * ${Math.sin(8*Math.PI/180)} + 100vh * ${Math.cos(8*Math.PI/180)})`}}const o=new r(document.querySelector(".revealer__inner"));new a(document.querySelector(".grid--slideshow")),imagesLoaded(document.querySelectorAll(".img"),{background:!0},()=>document.body.classList.remove("loading")),[...document.querySelectorAll('.frame__mode input[type="radio"]')].forEach(e=>e.addEventListener("click",()=>{document.body.classList[e.parentNode.classList.contains("frame__mode-item--dark")?"add":"remove"]("dark-mode")}))}
